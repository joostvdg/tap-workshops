<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="TAP Single Cluster with Supply Chain Basic Installation"><meta name=author content=joostvdg><link href=https://joostvdg.github.io/tap-workshops/install/basic/ rel=canonical><link href=../../apps/external-service/ rel=prev><link href=../gitops/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.15"><title>TAP Basic Install - TAP Workshops</title><link rel=stylesheet href=../../assets/stylesheets/main.113286f1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.a0c5b2b5.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#goals-outcomes-operator class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="TAP Workshops" class="md-header__button md-logo" aria-label="TAP Workshops" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M6.5 20q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48 1.18-1.53 3.08-1.95.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5 1.14 1.28 1.14 3 0 1.88-1.31 3.19T18.5 20Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TAP Workshops </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> TAP Basic Install </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/joostvdg/tap-workshops title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> joostvdg/tap-workshops </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> HOME </a> </li> <li class=md-tabs__item> <a href=../../labs/ class=md-tabs__link> Labs </a> </li> <li class=md-tabs__item> <a href=./ class="md-tabs__link md-tabs__link--active"> Installation </a> </li> <li class=md-tabs__item> <a href=../../apps/hello-world/ class=md-tabs__link> Applications </a> </li> <li class=md-tabs__item> <a href=../../supply-chain/custom/ class=md-tabs__link> SupplyChains </a> </li> <li class=md-tabs__item> <a href=../../custom/accelerator.md.md class=md-tabs__link> Customizations </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="TAP Workshops" class="md-nav__button md-logo" aria-label="TAP Workshops" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M6.5 20q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48 1.18-1.53 3.08-1.95.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5 1.14 1.28 1.14 3 0 1.88-1.31 3.19T18.5 20Z"/></svg> </a> TAP Workshops </label> <div class=md-nav__source> <a href=https://github.com/joostvdg/tap-workshops title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> joostvdg/tap-workshops </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> HOME </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Labs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Labs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../labs/ class=md-nav__link> Labs </a> </li> <li class=md-nav__item> <a href=./ class=md-nav__link> None </a> </li> <li class=md-nav__item> <a href=../../apps/hello-world/ class=md-nav__link> None </a> </li> <li class=md-nav__item> <a href=../../supply-chain/custom/ class=md-nav__link> None </a> </li> <li class=md-nav__item> <a href=../../supply-chain/basic-to-test-scan/ class=md-nav__link> None </a> </li> <li class=md-nav__item> <a href=../../apps/external-service/ class=md-nav__link> None </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> TAP Basic Install <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> TAP Basic Install </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#goals-outcomes-operator class=md-nav__link> Goals &amp; Outcomes Operator </a> </li> <li class=md-nav__item> <a href=#steps class=md-nav__link> Steps </a> </li> <li class=md-nav__item> <a href=#verify-prerequisites-are-met class=md-nav__link> Verify Prerequisites are met </a> </li> <li class=md-nav__item> <a href=#optional-install-cluster-essentials class=md-nav__link> Optional: Install Cluster Essentials </a> </li> <li class=md-nav__item> <a href=#choose-tap-setup-profile-installation-type class=md-nav__link> Choose TAP setup (profile, installation type) </a> </li> <li class=md-nav__item> <a href=#install-package-repository class=md-nav__link> Install Package Repository </a> </li> <li class=md-nav__item> <a href=#review-tap-packages-configuration-options class=md-nav__link> Review TAP packages configuration options </a> </li> <li class=md-nav__item> <a href=#install-tap-profile class=md-nav__link> Install TAP Profile </a> </li> <li class=md-nav__item> <a href=#install-test-application class=md-nav__link> Install Test Application </a> </li> <li class=md-nav__item> <a href=#register-and-view-app-in-tap-gui class=md-nav__link> Register and View App in TAP GUI </a> </li> <li class=md-nav__item> <a href=#cleanup class=md-nav__link> Cleanup </a> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> Links </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../gitops/ class=md-nav__link> TAP GitOps Install </a> </li> <li class=md-nav__item> <a href=../mutlicluster/ class=md-nav__link> Multicluster Install </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> Applications <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Applications </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../apps/hello-world/ class=md-nav__link> TAP Workload Demo </a> </li> <li class=md-nav__item> <a href=../../apps/external-service/ class=md-nav__link> TAP App with External Service </a> </li> <li class=md-nav__item> <a href=../../apps/where-for-dinner/ class=md-nav__link> TAP Where For Dinner App </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> SupplyChains <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> SupplyChains </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../supply-chain/custom/ class=md-nav__link> Create Supply Chain </a> </li> <li class=md-nav__item> <a href=../../supply-chain/basic-to-test-scan/ class=md-nav__link> Test & Scan Supply Chain </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> Customizations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Customizations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../custom/accelerator.md.md class=md-nav__link> None </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#goals-outcomes-operator class=md-nav__link> Goals &amp; Outcomes Operator </a> </li> <li class=md-nav__item> <a href=#steps class=md-nav__link> Steps </a> </li> <li class=md-nav__item> <a href=#verify-prerequisites-are-met class=md-nav__link> Verify Prerequisites are met </a> </li> <li class=md-nav__item> <a href=#optional-install-cluster-essentials class=md-nav__link> Optional: Install Cluster Essentials </a> </li> <li class=md-nav__item> <a href=#choose-tap-setup-profile-installation-type class=md-nav__link> Choose TAP setup (profile, installation type) </a> </li> <li class=md-nav__item> <a href=#install-package-repository class=md-nav__link> Install Package Repository </a> </li> <li class=md-nav__item> <a href=#review-tap-packages-configuration-options class=md-nav__link> Review TAP packages configuration options </a> </li> <li class=md-nav__item> <a href=#install-tap-profile class=md-nav__link> Install TAP Profile </a> </li> <li class=md-nav__item> <a href=#install-test-application class=md-nav__link> Install Test Application </a> </li> <li class=md-nav__item> <a href=#register-and-view-app-in-tap-gui class=md-nav__link> Register and View App in TAP GUI </a> </li> <li class=md-nav__item> <a href=#cleanup class=md-nav__link> Cleanup </a> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> Links </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <nav class=md-tags> <span class=md-tag>tap</span> <span class=md-tag>kubernetes</span> <span class=md-tag>install</span> </nav> <h1>TAP Basic Install</h1> <div class="admonition important"> <p class=admonition-title>Important</p> <p>The Goals and Outcomes is the work of Rick Farmer.</p> </div> <h2 id=goals-outcomes-operator>Goals &amp; Outcomes Operator<a class=headerlink href=#goals-outcomes-operator title="Permanent link">&para;</a></h2> <ol> <li>I can do a basic install of TAP within a customer environment</li> <li>I have a basic understanding of the core features of TAP such that I can explain these to a customer</li> <li>Iâ€™m able to demo TAP deployment via an OOTB accelerator and can explain the benefits of accelerator</li> </ol> <h3 id=checks>Checks<a class=headerlink href=#checks title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Know the relevant parts of the docs</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Understand the prerequisites: TAP install</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Understand the prerequisites: Jump Host</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Can configure a TAP Full Profile config file</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Can discover how to configure TAP Packages</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Understand how to configure custom CA</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Can install TAP Full Profile</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I manually installed TAP</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I'm able to use an accelerator to generate a Web TAP Workload</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I'm able to manually setup a single developer namespace</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I applied a TAP Web Workload and register it within TAP GUI</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I'm able to do basic troubleshooting of a TAP Workload</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I'm able to do basic troubleshooting of a TAP Installation</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I've configured App Live View in TAP GUI for a TAP Web Workload</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I can update TAP values and reconcile changes on the cluster</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I understand TAP GUI Catalog System</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I know how to configure an integration to a private Git provider in TAP GUI</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I know how to configure access to private container registries in TAP Values</li> </ul> <h3 id=optional>Optional<a class=headerlink href=#optional title="Permanent link">&para;</a></h3> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I'm able to install Learning Center and use the sample workshop.</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I understand the different Workload Types available in TAP</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I can configure a public Git provider for TAP GUI in TAP Values</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I can configure DNS for TAP Endpoints</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I have relocated TAP Images to my own container registry and understand the imgpkg utility.</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I understand Kapp Controller and Secret Gen Controller in the context of TAP</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I've able to configure and install the OOTB Testing and Scanning Supply Chain and verify a Workload</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I am able to configure a Scan Policy for a Source and Image Scan</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I am able to create a Tekton Task to execute Unit Tests within a Supply Chain for a Developer Namespace</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I know how to configure an Auth Provider for TAP GUI access</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I'm able to configure TAP GUI to read from Metadata Store.</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I know how to configure access to private repositories (SCM and Container) for TAP Workloads</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I am able to register API Documentation for a Workload in TAP GUI</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> I am able to view and verify results for the Security Analysis within TAP GUI</li> </ul> <h2 id=steps>Steps<a class=headerlink href=#steps title="Permanent link">&para;</a></h2> <ul> <li>Verify Prerequisites are met</li> <li>Install Cluster Essentials</li> <li>Choose TAP setup (profile, installation type)</li> <li>Review TAP packages configuration options<ul> <li>e.g., TAP values schema -&gt; map value to other package -&gt; other package values schema</li> </ul> </li> <li>Install TAP Profile</li> <li>Install Test Workload</li> </ul> <h2 id=verify-prerequisites-are-met>Verify Prerequisites are met<a class=headerlink href=#verify-prerequisites-are-met title="Permanent link">&para;</a></h2> <p>The <a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/prerequisites.html>prerequisites</a><sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup> we need:</p> <ul> <li>Credentials for Tanzu Net</li> <li>Credentials for local Container Image Registry</li> <li>Accept Tanzu Application Platform EULAs</li> <li>DNS Records for the clusters</li> <li>Suitable Kubernetes clusters</li> <li>Jump Host or other machine with the required tools in place</li> <li>Relocate TAP Images to local Container Image Registry</li> </ul> <h3 id=required-tools>Required Tools<a class=headerlink href=#required-tools title="Permanent link">&para;</a></h3> <ul> <li>kubectl</li> <li>yq</li> <li>jq</li> <li>Tanzu CLI<ul> <li>with TAP plugins</li> </ul> </li> <li>curl</li> <li>...?</li> </ul> <h3 id=suitable-kubernetes-clusters>Suitable Kubernetes clusters<a class=headerlink href=#suitable-kubernetes-clusters title="Permanent link">&para;</a></h3> <p>TAP 1.5 <a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/prerequisites.html#kubernetes-cluster-requirements-3>supports Kubernetes 1.24, 1.25 and 1.26</a><sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup>.</p> <p>Indicative cluster resource requirements of TAP per profile: (TODO: verify these numbers)</p> <table> <thead> <tr> <th>Profile</th> <th>Memory/Node</th> <th>Storage/Node</th> <th>vCPU Total</th> <th>Memory Total</th> </tr> </thead> <tbody> <tr> <td><strong>Iterate</strong></td> <td>8GB</td> <td>150GB</td> <td>12</td> <td>16GB</td> </tr> <tr> <td><strong>Build</strong></td> <td>16GB</td> <td>150GB</td> <td>12</td> <td>12GB</td> </tr> <tr> <td><strong>View</strong></td> <td>8GB</td> <td>50GB</td> <td>8</td> <td>8GB</td> </tr> <tr> <td><strong>Run</strong></td> <td>8GB</td> <td>100GB</td> <td>12</td> <td>8GB</td> </tr> <tr> <td><strong>Full</strong></td> <td>16GB</td> <td>150BG</td> <td>16</td> <td>20GB</td> </tr> </tbody> </table> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>These are requirements to run the TAP components. This does <strong>not</strong> include the applications or builds run in the cluster.</p> <p>For example, let's look at an application in a Run cluster. If your application requires 10vCPU and 40GB memory, you add that on top of the TAP requirements. Your Run cluser now needs a minimum of 22vCPU and 48GB of memory.</p> </div> <h3 id=tap-images-relocated>TAP Images Relocated<a class=headerlink href=#tap-images-relocated title="Permanent link">&para;</a></h3> <p>TODO: provide information on what has been relocated and to where for the LAB environment <sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup></p> <h2 id=optional-install-cluster-essentials>Optional: Install Cluster Essentials<a class=headerlink href=#optional-install-cluster-essentials title="Permanent link">&para;</a></h2> <div class="admonition danger"> <p class=admonition-title>Optional</p> <p>The intention is that your Lab environments has them installed already.</p> <p>You can verify this:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>kubectl<span class=w> </span>get<span class=w> </span>po<span class=w> </span>-n<span class=w> </span>secretgen-controller
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>NAME<span class=w>                                   </span>READY<span class=w>   </span>STATUS<span class=w>    </span>RESTARTS<span class=w>   </span>AGE
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>secretgen-controller-b9d795c44-ml5pk<span class=w>   </span><span class=m>1</span>/1<span class=w>     </span>Running<span class=w>   </span><span class=m>0</span><span class=w>          </span>42m
</span></code></pre></div> <p>And, to be sure:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>kubectl<span class=w> </span>get<span class=w> </span>pod<span class=w> </span>-n<span class=w> </span>tkg-system
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>NAME<span class=w>                                                     </span>READY<span class=w>   </span>STATUS<span class=w>    </span>RESTARTS<span class=w>   </span>AGE
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>kapp-controller-55d5dd6486-b47mn<span class=w>                         </span><span class=m>2</span>/2<span class=w>     </span>Running<span class=w>   </span><span class=m>0</span><span class=w>          </span>43m
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>tanzu-capabilities-controller-manager-7cdd959657-sb9x6<span class=w>   </span><span class=m>1</span>/1<span class=w>     </span>Running<span class=w>   </span><span class=m>0</span><span class=w>          </span>42m
</span></code></pre></div> <p>If these are not there and both commands return empty, verify you are talking to the correct cluster. And if required, below are the instructions for installing the Cluster Essentials.</p> <p>If they are installed, <a href=/tap-workshops/install/basic/#choose-tap-setup-profile-installation-type>proceed to Choose TAP setup</a></p> </div> <p><a href=https://docs.vmware.com/en/Cluster-Essentials-for-VMware-Tanzu/1.5/cluster-essentials/deploy.html>Cluster Essentials</a><sup id=fnref:4><a class=footnote-ref href=#fn:4>4</a></sup> essentially (pun intended) boils down to two components:</p> <ul> <li><a href=https://carvel.dev/kapp-controller/ >KAPP Controller</a><sup id=fnref:5><a class=footnote-ref href=#fn:5>5</a></sup></li> <li><a href=https://github.com/carvel-dev/secretgen-controller>SecretGen Controller</a><sup id=fnref:6><a class=footnote-ref href=#fn:6>6</a></sup></li> </ul> <p>Please install the <a href=https://docs.vmware.com/en/Cluster-Essentials-for-VMware-Tanzu/1.5/cluster-essentials/deploy.html>Cluster Essentials</a><sup id=fnref2:4><a class=footnote-ref href=#fn:4>4</a></sup> according to the docs.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>While not explicitly mentioned, for each TAP minor version (e.g., 1.4, 1.5) there is an associated Cluster Essentials<sup id=fnref3:4><a class=footnote-ref href=#fn:4>4</a></sup>.</p> <p>A minimum version of either controller is required, although there is no explicit version of either known at this point in time (April 2023).</p> <p>So unless there is a strong reason not too, use the Cluster Essentials referenced in the TAP docs.</p> </div> <h2 id=choose-tap-setup-profile-installation-type>Choose TAP setup (profile, installation type)<a class=headerlink href=#choose-tap-setup-profile-installation-type title="Permanent link">&para;</a></h2> <p>For almost every customer, the TAP installation covers multiple environments, multiple clusters, and various profiles.</p> <p>Some customers want a Run cluster per application, others assume multi-tenancy is oke.</p> <p>It is generally recommended to assume different environments with their own purpose. For example:</p> <ul> <li><strong>Test</strong>: contains one or more clusters, regularly re-created, used for experimentation and learning. Only used by the Platform Team.</li> <li><strong>Staging</strong>: multiple clusters and multiple profiles, used for testing specific features and upgrades. Used by the Platform Team, and a handful of "beta testers".</li> <li><strong>Production</strong>: multiple clusters and multiple profiles, including an iterate cluster for learning for end-users.</li> </ul> <h3 id=full-profile-for-workshop>Full Profile For Workshop<a class=headerlink href=#full-profile-for-workshop title="Permanent link">&para;</a></h3> <p>For the sake of brevity for this workshop, we'll stick to a single cluster with the <strong>Full</strong> profile.</p> <p>While this does not represent a typical installation, it let's you go through the steps of installing and using TAP. It also shows you all the components and let's you customize and interact with them, without having to go multiple times the same process.</p> <p>The <strong>Full</strong> profile contains all the components of TAP, which is what the name implies (not always true, but this time it is).</p> <h3 id=install-type>Install Type<a class=headerlink href=#install-type title="Permanent link">&para;</a></h3> <p>Next we choose how we want to install TAP.</p> <p>There are currently three options:</p> <ol> <li>Traditional manual KAPP package install, online</li> <li>Traditional manual KAPP package install, <strong>offline</strong></li> <li>GitOps install, <strong><em>beta</em></strong></li> </ol> <p>It is likely that the GitOps installation type will be the default in the future.</p> <p>For now the most common (and supported) installation is the Traditional <strong>Offline</strong> install.</p> <p>It is good to understand what steps need to be taken before automating them. So this is the type we'll use for this workshop.</p> <h3 id=version>Version<a class=headerlink href=#version title="Permanent link">&para;</a></h3> <p>Ideally we want to use the latest (supported) version.</p> <p>Which at this time of writing is TAP <strong>1.5</strong>.</p> <p>TAP 1.5 requires Kubernetes 1.24, so this is currently (April 2023) not supported on TGKs based customers, as they can only go to Kubernetes 1.23.</p> <p>Assuming that in due time vSphere 8 with TGKs does support 1.24 (the Supervisor cluster already does), TAP 1.5 is a relatively safe bet.</p> <p>TAP 1.6, not yet released, will require Kubernetes 1.25, which won't be supported anytime soon with TGKs or TGKm.</p> <p>So let's stick to TAP <strong>1.5</strong>.</p> <h3 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h3> <p>Our TAP environment will be as follows:</p> <ul> <li>TAP 1.5</li> <li>single Kubernetes cluster of 1.24</li> <li>using the Full profile</li> <li>installed via the traditional KAPP package, assuming a internet restricted environment</li> </ul> <h2 id=install-package-repository>Install Package Repository<a class=headerlink href=#install-package-repository title="Permanent link">&para;</a></h2> <p>Now that we know what version of TAP we want to install, and how we want to install it, we install the Package Repository.</p> <p>Assumptions: * All relevant TAP packages are relocated * We have read credentials to Image Registry containing the TAP apps * We have Kubernetes cluster * Which runs a version that TAP supports (e.g., 1.24) * The nodes trust the CA of Image Registry</p> <h3 id=create-required-secrets>Create Required Secrets<a class=headerlink href=#create-required-secrets title="Permanent link">&para;</a></h3> <p>The TAP Package Repository comes from either Tanzu Network or the Registry you relocated the TAP images to.</p> <p>In either case, you need a Registry <strong><em>read</em></strong> credential in the Namespace we install the Package Repository in.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=o>=</span>tap-install
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_INSTALL_REGISTRY_SECRET</span><span class=o>=</span>tap-registry
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_INSTALL_REGISTRY_HOSTNAME</span><span class=o>=</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_INSTALL_REGISTRY_USERNAME</span><span class=o>=</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_INSTALL_REGISTRY_PASSWORD</span><span class=o>=</span>
</span></code></pre></div> <p>First, create the Namespace:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>kubectl<span class=w> </span>create<span class=w> </span>namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>true</span>
</span></code></pre></div> <p>And then use the Tanzu CLI to create a credential via the SecretGen Controller:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>tanzu<span class=w> </span>secret<span class=w> </span>registry<span class=w> </span>add<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_REGISTRY_SECRET</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span>--server<span class=w>    </span><span class=nv>$TAP_INSTALL_REGISTRY_HOSTNAME</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span>--username<span class=w>  </span><span class=nv>$TAP_INSTALL_REGISTRY_USERNAME</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span>--password<span class=w>  </span><span class=nv>$TAP_INSTALL_REGISTRY_PASSWORD</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span>--export-to-all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span>--yes<span class=w> </span>
</span></code></pre></div> <div class="admonition important"> <p class=admonition-title>Registry Write Secret</p> <p>TAP profiles <code>Iterate</code>, <code>Full</code>, and <code>Build</code>, also need a Registry <strong><em>write</em></strong> secret.</p> <p>This secret is used to write built images of the applications going throuhg the Supply Chains. Define the appropriate environment variables:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=o>=</span>tap-install
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_BUILD_REGISTRY_SECRET</span><span class=o>=</span>registry-credentials
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_BUILD_REGISTRY_HOSTNAME</span><span class=o>=</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_BUILD_REGISTRY_USERNAME</span><span class=o>=</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_BUILD_REGISTRY_PASSWORD</span><span class=o>=</span>
</span></code></pre></div> <p>And then we use the Tanzu CLI to create the secret:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>tanzu<span class=w> </span>secret<span class=w> </span>registry<span class=w> </span>add<span class=w> </span><span class=si>${</span><span class=nv>TAP_BUILD_REGISTRY_SECRET</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>--username<span class=w> </span><span class=si>${</span><span class=nv>TAP_BUILD_REGISTRY_USERNAME</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>--password<span class=w> </span><span class=si>${</span><span class=nv>TAP_BUILD_REGISTRY_PASSWORD</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>--server<span class=w>   </span><span class=si>${</span><span class=nv>TAP_BUILD_REGISTRY_HOSTNAME</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>--export-to-all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>--yes
</span></code></pre></div> </div> <h3 id=create-package-repository>Create Package Repository<a class=headerlink href=#create-package-repository title="Permanent link">&para;</a></h3> <p>To make the values less abstract, let's look at an example.</p> <p>Assume we have a internal Harbor registry, with the hostname <code>harbor.example.com</code>. We create a project in this Harbor instance called <code>tap</code>, and relocated the TAP packages to this project as <code>tap-packages</code>.</p> <p>The complete URL will now be: <code>harbor.example.com/tap/tap-packages:1.5.0</code>.</p> <p>And our environment variables will be:</p> <ul> <li><code>INSTALL_REGISTRY_REPO=tap</code></li> <li><code>INSTALL_REGISTRY_HOSTNAME=harbor.example.com</code></li> <li><code>TAP_VERSION=1.5.0</code></li> </ul> <p>Set the environment variables to values appropriate for your environment.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=o>=</span>tap-install
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_VERSION</span><span class=o>=</span><span class=m>1</span>.5.0
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REGISTRY_REPO</span><span class=o>=</span>tap
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REGISTRY_HOSTNAME</span><span class=o>=</span><span class=si>${</span><span class=nv>TAP_INSTALL_REGISTRY_HOSTNAME</span><span class=si>}</span>
</span></code></pre></div> <p>And use the Tanzu CLI to create the Package Repository for TAP in the TAP install Namespace (usually <code>tap-install</code>).</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>add<span class=w> </span>tanzu-tap-repository<span class=w> </span><span class=se>\</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span>--url<span class=w> </span><span class=si>${</span><span class=nv>INSTALL_REGISTRY_HOSTNAME</span><span class=si>}</span>/<span class=si>${</span><span class=nv>INSTALL_REGISTRY_REPO</span><span class=si>}</span>/tap-packages:<span class=si>${</span><span class=nv>TAP_VERSION</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>Run the command below to verify the Package Repository is reconciled successfully:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>list<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>This should return something like this:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=w>  </span>NAME<span class=w>                      </span>SOURCE<span class=w>                                                                            </span>STATUS
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span>tanzu-tap-repository<span class=w>      </span><span class=o>(</span>imgpkg<span class=o>)</span><span class=w> </span>harbor.services.h2o-2-9349.h2o.vmware.com/tap/tap-packages:1.5.0<span class=w>         </span>Reconcile<span class=w> </span>succeeded
</span></code></pre></div> <h3 id=configure-certificate-authority-bundle-for-crossplane>Configure Certificate Authority Bundle For Crossplane<a class=headerlink href=#configure-certificate-authority-bundle-for-crossplane title="Permanent link">&para;</a></h3> <p>The use of external services via the <a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/bitnami-services-tutorials-working-with-bitnami-services.html>Bitnami Services</a><sup id=fnref:14><a class=footnote-ref href=#fn:14>14</a></sup> feature relies on <a href=https://www.crossplane.io/ >Crossplane</a><sup id=fnref:15><a class=footnote-ref href=#fn:15>15</a></sup>.</p> <p>Unfortunately, in the <code>1.5.0</code> release of TAP, the Crossplane package does not pickup the <code>shared.ca_cert_data</code> property.</p> <p>This means we must configure Crossplane ourselves. Crossplane expects <a href=https://docs.crossplane.io/knowledge-base/guides/self-signed-ca-certs/ >a ConfigMap with a ca-bundle property</a><sup id=fnref:13><a class=footnote-ref href=#fn:13>13</a></sup>, which we later configure when installing TAP Profile.</p> <p>First, verify the <code>crossplane-system</code> namespace exists:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>kubectl<span class=w> </span>create<span class=w> </span>namespace<span class=w> </span>crossplane-system<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>true</span>
</span></code></pre></div> <p>And then create the ConfigMap with the expected name and value.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>kubectl<span class=w> </span>-n<span class=w> </span>crossplane-system<span class=w> </span>create<span class=w> </span>cm<span class=w> </span>ca-bundle-config<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span>--from-file<span class=o>=</span>ca-bundle<span class=o>=</span>ca.crt
</span></code></pre></div> <h2 id=review-tap-packages-configuration-options>Review TAP packages configuration options<a class=headerlink href=#review-tap-packages-configuration-options title="Permanent link">&para;</a></h2> <p>Before we can install our TAP Profile as desired, we need to understand how to configure it.</p> <p>We can take a look at the available packages and specifically the TAP package itself to discover what we can configure.</p> <h3 id=explore-packages>Explore Packages<a class=headerlink href=#explore-packages title="Permanent link">&para;</a></h3> <p>The first step, is to discover the packages available to us.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>tanzu<span class=w> </span>package<span class=w> </span>available<span class=w> </span>list<span class=w> </span>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>This is a large list, so we'll limit the expected output:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=w>  </span>NAME<span class=w>                                                 </span>DISPLAY-NAME
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>  </span>accelerator.apps.tanzu.vmware.com<span class=w>                    </span>Application<span class=w> </span>Accelerator<span class=w> </span><span class=k>for</span><span class=w> </span>VMware<span class=w> </span>Tanzu
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>  </span>api-portal.tanzu.vmware.com<span class=w>                          </span>API<span class=w> </span>portal
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>  </span>apis.apps.tanzu.vmware.com<span class=w>                           </span>API<span class=w> </span>Auto<span class=w> </span>Registration<span class=w> </span><span class=k>for</span><span class=w> </span>VMware<span class=w> </span>Tanzu
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>  </span>...
</span></code></pre></div> <p>To see what we can configure with TAP, we have to take a few steps:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>tanzu<span class=w> </span>package<span class=w> </span>available<span class=w> </span>get<span class=w> </span>tap.tanzu.vmware.com<span class=w> </span>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>This returns the versions of the TAP main package available to us.</p> <p>You can also get a list of available packages and their version via <code>kubectl</code>:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>kubectl<span class=w> </span>get<span class=w> </span>package<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>Which results in something like this:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>NAME<span class=w>                                                            </span>PACKAGEMETADATA<span class=w> </span>NAME<span class=w>                                  </span>VERSION<span class=w>                         </span>AGE
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>antrea.tanzu.vmware.com.1.7.2+vmware.1-tkg.1-advanced<span class=w>           </span>antrea.tanzu.vmware.com<span class=w>                               </span><span class=m>1</span>.7.2+vmware.1-tkg.1-advanced<span class=w>   </span>646h52m30s
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>capabilities.tanzu.vmware.com.0.28.1+vmware.1<span class=w>                   </span>capabilities.tanzu.vmware.com<span class=w>                         </span><span class=m>0</span>.28.1+vmware.1<span class=w>                 </span>646h52m34s
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>kube-vip-cloud-provider.tanzu.vmware.com.0.0.4+vmware.2-tkg.1<span class=w>   </span>kube-vip-cloud-provider.tanzu.vmware.com<span class=w>              </span><span class=m>0</span>.0.4+vmware.2-tkg.1<span class=w>            </span>646h52m33s
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>...
</span></code></pre></div> <p>Eitherway, we now know the version of the TAP package available to us, <code>1.5.0</code>. We need this information if we want to see the possible values for the TAP package.</p> <p>We add the version to the package name (<code>&lt;packageName&gt;/&lt;packageVersion&gt;</code>), and then add the <code>--values-schema</code> flag.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>tanzu<span class=w> </span>package<span class=w> </span>available<span class=w> </span>get<span class=w> </span>tap.tanzu.vmware.com/1.5.0<span class=w> </span><span class=se>\</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=w>  </span>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=w>  </span>--values-schema
</span></code></pre></div> <p>This results in a long list of possible values:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=w>  </span>KEY<span class=w>                                                  </span>DEFAULT<span class=w>                 </span>TYPE<span class=w>    </span>DESCRIPTION
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>  </span>appliveview<span class=w>                                                                  </span>object<span class=w>  </span>App<span class=w> </span>Live<span class=w> </span>View<span class=w> </span>configuration
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>  </span>contour.envoy.service.type<span class=w>                           </span>LoadBalancer<span class=w>            </span>string<span class=w>  </span>Set<span class=w> </span>to<span class=w> </span>LoadBalancer<span class=w> </span>by<span class=w> </span>default<span class=p>;</span><span class=w> </span>valid<span class=w> </span>values<span class=w> </span>are<span class=w> </span>LoadBalancer,<span class=w> </span>NodePort<span class=w> </span>and
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>                                                                                       </span>ClusterIP<span class=o>(</span>except<span class=w> </span><span class=k>for</span><span class=w> </span>contour.infrastructure_provider<span class=o>=</span>vsphere<span class=o>)</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>  </span>crossplane<span class=w>                                                                   </span>object<span class=w>  </span>Crossplane<span class=w> </span>configuration
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>  </span>image_policy_webhook<span class=w>                                                         </span>object<span class=w>  </span>Image<span class=w> </span>Policy<span class=w> </span>Webhook<span class=w> </span>configuration
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>  </span>learningcenter<span class=w>                                                               </span>object<span class=w>  </span>Learning<span class=w> </span>Center<span class=w> </span>configuration
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>  </span>...
</span></code></pre></div> <p>As you can probably tell, many of these values are not explained at this level.</p> <p>For example, the <code>TYPE</code> of <code>crossplane</code> is <code>object</code>. We will have to explore the values schema of the Crossplane package to discover what we can configure here if we need to.</p> <p>There is a lot of overlap between the packages, especially with configuration options such as a Domain name, secrets, or a custom CA.</p> <p>These are conventient configurable via the <code>shared</code> configuration key:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>tanzu<span class=w> </span>package<span class=w> </span>available<span class=w> </span>get<span class=w> </span>tap.tanzu.vmware.com/1.5.0<span class=w> </span><span class=se>\</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>  </span>--values-schema<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>shared.
</span></code></pre></div> <p>This gives the following list:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=w>  </span>shared.image_registry.password<span class=w>                       </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>Password<span class=w> </span><span class=k>for</span><span class=w> </span>the<span class=w> </span>image<span class=w> </span>registry.<span class=w> </span>Mutually<span class=w> </span>exclusive<span class=w> </span>with
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=w>                                                                                       </span>shared.image_registry.secret.name/namespace.
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>  </span>shared.image_registry.project_path<span class=w>                   </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>Project<span class=w> </span>path<span class=w> </span><span class=k>in</span><span class=w> </span>the<span class=w> </span>image<span class=w> </span>registry<span class=w> </span>server<span class=w> </span>used<span class=w> </span><span class=k>for</span><span class=w> </span>builder<span class=w> </span>and
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>  </span>shared.image_registry.secret.name<span class=w>                    </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>Secret<span class=w> </span>name<span class=w> </span><span class=k>for</span><span class=w> </span>the<span class=w> </span>image<span class=w> </span>registry<span class=w> </span>credentials<span class=w> </span>of
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=w>                                                                                       </span>shared.image_registry.username/password.
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=w>  </span>shared.image_registry.secret.namespace<span class=w>               </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>Secret<span class=w> </span>namespace<span class=w> </span><span class=k>for</span><span class=w> </span>the<span class=w> </span>image<span class=w> </span>registry<span class=w> </span>credentials.<span class=w> </span>Mutually
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=w>                                                                                       </span>exclusive<span class=w> </span>with<span class=w> </span>shared.image_registry.username/password.
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=w>  </span>shared.image_registry.username<span class=w>                       </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>Username<span class=w> </span><span class=k>for</span><span class=w> </span>the<span class=w> </span>image<span class=w> </span>registry.<span class=w> </span>Mutually<span class=w> </span>exclusive<span class=w> </span>with
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=w>                                                                                       </span>shared.image_registry.secret.name/namespace.
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=w>  </span>shared.ingress_domain<span class=w>                                </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>Domain<span class=w> </span>name<span class=w> </span>to<span class=w> </span>be<span class=w> </span>used<span class=w> </span><span class=k>in</span><span class=w> </span>service<span class=w> </span>routes<span class=w> </span>and<span class=w> </span>hostnames<span class=w> </span><span class=k>for</span><span class=w> </span>instances
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=w>  </span>shared.ingress_issuer<span class=w>                                </span>tap-ingress-selfsigned<span class=w>  </span>string<span class=w>  </span>Optional:<span class=w> </span>A<span class=w> </span>cert-manager.io/v1/ClusterIssuer<span class=w> </span><span class=k>for</span><span class=w> </span>issuing<span class=w> </span>TLS<span class=w> </span>certificates<span class=w> </span>to<span class=w> </span>TAP
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=w>  </span>shared.kubernetes_distribution<span class=w>                       </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>Type<span class=w> </span>of<span class=w> </span>K8s<span class=w> </span>infrastructure<span class=w> </span>being<span class=w> </span>used.<span class=w> </span>Can<span class=w> </span>be<span class=w> </span>used<span class=w> </span><span class=k>in</span><span class=w> </span>coordination
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=w>  </span>shared.kubernetes_version<span class=w>                            </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>K8s<span class=w> </span>version.<span class=w> </span>Can<span class=w> </span>be<span class=w> </span>used<span class=w> </span>independently<span class=w> </span>or<span class=w> </span><span class=k>in</span><span class=w> </span>coordination<span class=w> </span>with
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a><span class=w>  </span>shared.activateAppLiveViewSecureAccessControl<span class=w>                                </span>bool<span class=w>    </span>Optional:<span class=w> </span>Enable<span class=w> </span>Secure<span class=w> </span>Access<span class=w> </span>Connection<span class=w> </span>between<span class=w> </span>App<span class=w> </span>Live<span class=w> </span>View<span class=w> </span>Components
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a><span class=w>  </span>shared.ca_cert_data<span class=w>                                  </span><span class=s2>&quot;&quot;</span><span class=w>                      </span>string<span class=w>  </span>Optional:<span class=w> </span>PEM<span class=w> </span>Encoded<span class=w> </span>certificate<span class=w> </span>data<span class=w> </span>to<span class=w> </span>trust<span class=w> </span>TLS<span class=w> </span>connections<span class=w> </span>with<span class=w> </span>a<span class=w> </span>private
</span></code></pre></div> <p>Let's dive into the Full profile next.</p> <h3 id=full-profile-example-from-docs>Full Profile Example From Docs<a class=headerlink href=#full-profile-example-from-docs title="Permanent link">&para;</a></h3> <p>The documentation has an annotated <a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/install.html#full-profile-3>Full profile configuration file</a><sup id=fnref:7><a class=footnote-ref href=#fn:7>7</a></sup> example, you can expand the example below if you want to see it.</p> <p>Let's look at how we use YTT to template the Profile configuration.</p> <details class=example> <summary>Full Profile Example From Docs</summary> <div class="language-yaml highlight"><span class=filename>full-profile.yaml</span><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=nt>shared</span><span class=p>:</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=w>  </span><span class=nt>ingress_domain</span><span class=p>:</span><span class=w> </span><span class=s>&quot;INGRESS-DOMAIN&quot;</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=w>  </span><span class=nt>ingress_issuer</span><span class=p>:</span><span class=w> </span><span class=c1># Optional, can denote a cert-manager.io/v1/ClusterIssuer of your choice. Defaults to &quot;tap-ingress-selfsigned&quot;.</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=w>  </span><span class=nt>image_registry</span><span class=p>:</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=w>    </span><span class=nt>project_path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;SERVER-NAME/REPO-NAME&quot;</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=w>    </span><span class=nt>secret</span><span class=p>:</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;KP-DEFAULT-REPO-SECRET&quot;</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=s>&quot;KP-DEFAULT-REPO-SECRET-NAMESPACE&quot;</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=w>  </span><span class=nt>kubernetes_distribution</span><span class=p>:</span><span class=w> </span><span class=s>&quot;K8S-DISTRO&quot;</span><span class=w> </span><span class=c1># Only required if the distribution is OpenShift and must be used with the following kubernetes_version key.</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=w>  </span><span class=nt>kubernetes_version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;K8S-VERSION&quot;</span><span class=w> </span><span class=c1># Required regardless of distribution when Kubernetes version is 1.25 or later.</span>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a>
</span><span id=__span-24-15><a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a><span class=w>  </span><span class=nt>ca_cert_data</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span><span class=w> </span><span class=c1># To be passed if using custom certificates.</span>
</span><span id=__span-24-16><a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a><span class=w>      </span><span class=no>-----BEGIN CERTIFICATE-----</span>
</span><span id=__span-24-17><a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a><span class=w>      </span><span class=no>MIIFXzCCA0egAwIBAgIJAJYm37SFocjlMA0GCSqGSIb3DQEBDQUAMEY...</span>
</span><span id=__span-24-18><a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a><span class=w>      </span><span class=no>-----END CERTIFICATE-----</span>
</span><span id=__span-24-19><a id=__codelineno-24-19 name=__codelineno-24-19 href=#__codelineno-24-19></a>
</span><span id=__span-24-20><a id=__codelineno-24-20 name=__codelineno-24-20 href=#__codelineno-24-20></a><span class=nt>ceip_policy_disclosed</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">FALSE-OR-TRUE-VALUE</span><span class=w> </span><span class=c1># Installation fails if this is not set to true. Not a string.</span>
</span><span id=__span-24-21><a id=__codelineno-24-21 name=__codelineno-24-21 href=#__codelineno-24-21></a>
</span><span id=__span-24-22><a id=__codelineno-24-22 name=__codelineno-24-22 href=#__codelineno-24-22></a><span class=c1>#The above keys are minimum numbers of entries needed in tap-values.yaml to get a functioning TAP Full profile installation.</span>
</span><span id=__span-24-23><a id=__codelineno-24-23 name=__codelineno-24-23 href=#__codelineno-24-23></a>
</span><span id=__span-24-24><a id=__codelineno-24-24 name=__codelineno-24-24 href=#__codelineno-24-24></a><span class=c1>#Below are the keys which may have default values set, but can be overridden.</span>
</span><span id=__span-24-25><a id=__codelineno-24-25 name=__codelineno-24-25 href=#__codelineno-24-25></a>
</span><span id=__span-24-26><a id=__codelineno-24-26 name=__codelineno-24-26 href=#__codelineno-24-26></a><span class=nt>profile</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">full</span><span class=w> </span><span class=c1># Can take iterate, build, run, view.</span>
</span><span id=__span-24-27><a id=__codelineno-24-27 name=__codelineno-24-27 href=#__codelineno-24-27></a>
</span><span id=__span-24-28><a id=__codelineno-24-28 name=__codelineno-24-28 href=#__codelineno-24-28></a><span class=nt>supply_chain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">basic</span><span class=w> </span><span class=c1># Can take testing, testing_scanning.</span>
</span><span id=__span-24-29><a id=__codelineno-24-29 name=__codelineno-24-29 href=#__codelineno-24-29></a>
</span><span id=__span-24-30><a id=__codelineno-24-30 name=__codelineno-24-30 href=#__codelineno-24-30></a><span class=nt>ootb_supply_chain_basic</span><span class=p>:</span><span class=w> </span><span class=c1># Based on supply_chain set above, can be changed to ootb_supply_chain_testing, ootb_supply_chain_testing_scanning.</span>
</span><span id=__span-24-31><a id=__codelineno-24-31 name=__codelineno-24-31 href=#__codelineno-24-31></a><span class=w>  </span><span class=nt>registry</span><span class=p>:</span>
</span><span id=__span-24-32><a id=__codelineno-24-32 name=__codelineno-24-32 href=#__codelineno-24-32></a><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=s>&quot;SERVER-NAME&quot;</span><span class=w> </span><span class=c1># Takes the value from the shared section by default, but can be overridden by setting a different value.</span>
</span><span id=__span-24-33><a id=__codelineno-24-33 name=__codelineno-24-33 href=#__codelineno-24-33></a><span class=w>    </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=s>&quot;REPO-NAME&quot;</span><span class=w> </span><span class=c1># Takes the value from the shared section by default, but can be overridden by setting a different value.</span>
</span><span id=__span-24-34><a id=__codelineno-24-34 name=__codelineno-24-34 href=#__codelineno-24-34></a><span class=w>  </span><span class=nt>gitops</span><span class=p>:</span>
</span><span id=__span-24-35><a id=__codelineno-24-35 name=__codelineno-24-35 href=#__codelineno-24-35></a><span class=w>    </span><span class=nt>ssh_secret</span><span class=p>:</span><span class=w> </span><span class=s>&quot;SSH-SECRET-KEY&quot;</span><span class=w> </span><span class=c1># Takes &quot;&quot; as value by default; but can be overridden by setting a different value.</span>
</span><span id=__span-24-36><a id=__codelineno-24-36 name=__codelineno-24-36 href=#__codelineno-24-36></a>
</span><span id=__span-24-37><a id=__codelineno-24-37 name=__codelineno-24-37 href=#__codelineno-24-37></a><span class=nt>contour</span><span class=p>:</span>
</span><span id=__span-24-38><a id=__codelineno-24-38 name=__codelineno-24-38 href=#__codelineno-24-38></a><span class=w>  </span><span class=nt>envoy</span><span class=p>:</span>
</span><span id=__span-24-39><a id=__codelineno-24-39 name=__codelineno-24-39 href=#__codelineno-24-39></a><span class=w>    </span><span class=nt>service</span><span class=p>:</span>
</span><span id=__span-24-40><a id=__codelineno-24-40 name=__codelineno-24-40 href=#__codelineno-24-40></a><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LoadBalancer</span><span class=w> </span><span class=c1># This is set by default, but can be overridden by setting a different value.</span>
</span><span id=__span-24-41><a id=__codelineno-24-41 name=__codelineno-24-41 href=#__codelineno-24-41></a>
</span><span id=__span-24-42><a id=__codelineno-24-42 name=__codelineno-24-42 href=#__codelineno-24-42></a><span class=nt>buildservice</span><span class=p>:</span>
</span><span id=__span-24-43><a id=__codelineno-24-43 name=__codelineno-24-43 href=#__codelineno-24-43></a><span class=w>  </span><span class=c1># Takes the value from the shared section by default, but can be overridden by setting a different value.</span>
</span><span id=__span-24-44><a id=__codelineno-24-44 name=__codelineno-24-44 href=#__codelineno-24-44></a><span class=w>  </span><span class=nt>kp_default_repository</span><span class=p>:</span><span class=w> </span><span class=s>&quot;KP-DEFAULT-REPO&quot;</span>
</span><span id=__span-24-45><a id=__codelineno-24-45 name=__codelineno-24-45 href=#__codelineno-24-45></a><span class=w>  </span><span class=nt>kp_default_repository_secret</span><span class=p>:</span><span class=w> </span><span class=c1># Takes the value from the shared section above by default, but can be overridden by setting a different value.</span>
</span><span id=__span-24-46><a id=__codelineno-24-46 name=__codelineno-24-46 href=#__codelineno-24-46></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;KP-DEFAULT-REPO-SECRET&quot;</span>
</span><span id=__span-24-47><a id=__codelineno-24-47 name=__codelineno-24-47 href=#__codelineno-24-47></a><span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=s>&quot;KP-DEFAULT-REPO-SECRET-NAMESPACE&quot;</span>
</span><span id=__span-24-48><a id=__codelineno-24-48 name=__codelineno-24-48 href=#__codelineno-24-48></a>
</span><span id=__span-24-49><a id=__codelineno-24-49 name=__codelineno-24-49 href=#__codelineno-24-49></a><span class=nt>tap_gui</span><span class=p>:</span>
</span><span id=__span-24-50><a id=__codelineno-24-50 name=__codelineno-24-50 href=#__codelineno-24-50></a><span class=w>  </span><span class=nt>service_type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span><span class=w> </span><span class=c1># If the shared.ingress_domain is set as earlier, this must be set to ClusterIP.</span>
</span><span id=__span-24-51><a id=__codelineno-24-51 name=__codelineno-24-51 href=#__codelineno-24-51></a><span class=w>  </span><span class=nt>metadataStoreAutoconfiguration</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w> </span><span class=c1># Create a service account, the Kubernetes control plane token and the requisite app_config block to enable communications between Tanzu Application Platform GUI and SCST - Store.</span>
</span><span id=__span-24-52><a id=__codelineno-24-52 name=__codelineno-24-52 href=#__codelineno-24-52></a><span class=w>  </span><span class=nt>app_config</span><span class=p>:</span>
</span><span id=__span-24-53><a id=__codelineno-24-53 name=__codelineno-24-53 href=#__codelineno-24-53></a><span class=w>    </span><span class=nt>catalog</span><span class=p>:</span>
</span><span id=__span-24-54><a id=__codelineno-24-54 name=__codelineno-24-54 href=#__codelineno-24-54></a><span class=w>      </span><span class=nt>locations</span><span class=p>:</span>
</span><span id=__span-24-55><a id=__codelineno-24-55 name=__codelineno-24-55 href=#__codelineno-24-55></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">url</span>
</span><span id=__span-24-56><a id=__codelineno-24-56 name=__codelineno-24-56 href=#__codelineno-24-56></a><span class=w>          </span><span class=nt>target</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://GIT-CATALOG-URL/catalog-info.yaml</span>
</span><span id=__span-24-57><a id=__codelineno-24-57 name=__codelineno-24-57 href=#__codelineno-24-57></a>
</span><span id=__span-24-58><a id=__codelineno-24-58 name=__codelineno-24-58 href=#__codelineno-24-58></a><span class=nt>metadata_store</span><span class=p>:</span>
</span><span id=__span-24-59><a id=__codelineno-24-59 name=__codelineno-24-59 href=#__codelineno-24-59></a><span class=w>  </span><span class=nt>ns_for_export_app_cert</span><span class=p>:</span><span class=w> </span><span class=s>&quot;MY-DEV-NAMESPACE&quot;</span>
</span><span id=__span-24-60><a id=__codelineno-24-60 name=__codelineno-24-60 href=#__codelineno-24-60></a><span class=w>  </span><span class=nt>app_service_type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span><span class=w> </span><span class=c1># Defaults to LoadBalancer. If shared.ingress_domain is set earlier, this must be set to ClusterIP.</span>
</span><span id=__span-24-61><a id=__codelineno-24-61 name=__codelineno-24-61 href=#__codelineno-24-61></a>
</span><span id=__span-24-62><a id=__codelineno-24-62 name=__codelineno-24-62 href=#__codelineno-24-62></a><span class=nt>scanning</span><span class=p>:</span>
</span><span id=__span-24-63><a id=__codelineno-24-63 name=__codelineno-24-63 href=#__codelineno-24-63></a><span class=w>  </span><span class=nt>metadataStore</span><span class=p>:</span>
</span><span id=__span-24-64><a id=__codelineno-24-64 name=__codelineno-24-64 href=#__codelineno-24-64></a><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w> </span><span class=c1># Configuration is moved, so set this string to empty.</span>
</span><span id=__span-24-65><a id=__codelineno-24-65 name=__codelineno-24-65 href=#__codelineno-24-65></a>
</span><span id=__span-24-66><a id=__codelineno-24-66 name=__codelineno-24-66 href=#__codelineno-24-66></a><span class=nt>grype</span><span class=p>:</span>
</span><span id=__span-24-67><a id=__codelineno-24-67 name=__codelineno-24-67 href=#__codelineno-24-67></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=s>&quot;MY-DEV-NAMESPACE&quot;</span>
</span><span id=__span-24-68><a id=__codelineno-24-68 name=__codelineno-24-68 href=#__codelineno-24-68></a><span class=w>  </span><span class=nt>targetImagePullSecret</span><span class=p>:</span><span class=w> </span><span class=s>&quot;TARGET-REGISTRY-CREDENTIALS-SECRET&quot;</span>
</span><span id=__span-24-69><a id=__codelineno-24-69 name=__codelineno-24-69 href=#__codelineno-24-69></a><span class=w>  </span><span class=c1># In a single cluster, the connection between the scanning pod and the metadata store happens inside the cluster and does not pass through ingress. This is automatically configured, you do not need to provide an ingress connection to the store.</span>
</span><span id=__span-24-70><a id=__codelineno-24-70 name=__codelineno-24-70 href=#__codelineno-24-70></a>
</span><span id=__span-24-71><a id=__codelineno-24-71 name=__codelineno-24-71 href=#__codelineno-24-71></a><span class=nt>policy</span><span class=p>:</span>
</span><span id=__span-24-72><a id=__codelineno-24-72 name=__codelineno-24-72 href=#__codelineno-24-72></a><span class=w>  </span><span class=nt>tuf_enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w> </span><span class=c1># By default, TUF initialization and keyless verification are deactivated.</span>
</span><span id=__span-24-73><a id=__codelineno-24-73 name=__codelineno-24-73 href=#__codelineno-24-73></a><span class=nt>tap_telemetry</span><span class=p>:</span>
</span><span id=__span-24-74><a id=__codelineno-24-74 name=__codelineno-24-74 href=#__codelineno-24-74></a><span class=w>  </span><span class=nt>customer_entitlement_account_number</span><span class=p>:</span><span class=w> </span><span class=s>&quot;CUSTOMER-ENTITLEMENT-ACCOUNT-NUMBER&quot;</span><span class=w> </span><span class=c1># (Optional) Identify data for creating the Tanzu Application Platform usage reports.</span>
</span></code></pre></div> </details> <h3 id=full-profile-template>Full Profile Template<a class=headerlink href=#full-profile-template title="Permanent link">&para;</a></h3> <p>Usually you will have more than one environment and possibly more than one of the same profile in the same environment. So you end up installing the same Profile more than once.</p> <p>It is recommended to use some kind of templating.</p> <p>In the world of Tanzu (and TAP), it makes sense to use YTT.</p> <div class="language-yaml highlight"><span class=filename>full-profile.ytt.yaml</span><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c1>#@ load(&quot;@ytt:data&quot;, &quot;data&quot;)</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=c1>#@ dv = data.values</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=c1>#@ kpRegistry = &quot;{}/{}&quot;.format(dv.buildRegistry, dv.tbsRepo)</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=nn>---</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=nt>profile</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">full</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=nt>shared</span><span class=p>:</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=w>  </span><span class=nt>ingress_domain</span><span class=p>:</span><span class=w> </span><span class=c1>#@ dv.domainName</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=w>  </span><span class=nt>ca_cert_data</span><span class=p>:</span><span class=w> </span><span class=c1>#@ dv.caCert</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=w>  </span><span class=nt>image_registry</span><span class=p>:</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=w>    </span><span class=nt>secret</span><span class=p>:</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=c1>#@ dv.buildRegistrySecret</span>
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-install</span>
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a>
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a><span class=nt>buildservice</span><span class=p>:</span>
</span><span id=__span-25-16><a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a><span class=w>  </span><span class=nt>pull_from_kp_default_repo</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-25-17><a id=__codelineno-25-17 name=__codelineno-25-17 href=#__codelineno-25-17></a><span class=w>  </span><span class=nt>exclude_dependencies</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-25-18><a id=__codelineno-25-18 name=__codelineno-25-18 href=#__codelineno-25-18></a><span class=w>  </span><span class=nt>kp_default_repository</span><span class=p>:</span><span class=w> </span><span class=c1>#@ kpRegistry</span>
</span><span id=__span-25-19><a id=__codelineno-25-19 name=__codelineno-25-19 href=#__codelineno-25-19></a><span class=w>  </span><span class=nt>kp_default_repository_secret</span><span class=p>:</span>
</span><span id=__span-25-20><a id=__codelineno-25-20 name=__codelineno-25-20 href=#__codelineno-25-20></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=c1>#@ dv.buildRegistrySecret</span>
</span><span id=__span-25-21><a id=__codelineno-25-21 name=__codelineno-25-21 href=#__codelineno-25-21></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-install</span>
</span><span id=__span-25-22><a id=__codelineno-25-22 name=__codelineno-25-22 href=#__codelineno-25-22></a>
</span><span id=__span-25-23><a id=__codelineno-25-23 name=__codelineno-25-23 href=#__codelineno-25-23></a><span class=nt>supply_chain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">basic</span>
</span><span id=__span-25-24><a id=__codelineno-25-24 name=__codelineno-25-24 href=#__codelineno-25-24></a><span class=nt>ootb_supply_chain_basic</span><span class=p>:</span>
</span><span id=__span-25-25><a id=__codelineno-25-25 name=__codelineno-25-25 href=#__codelineno-25-25></a><span class=w>  </span><span class=nt>registry</span><span class=p>:</span>
</span><span id=__span-25-26><a id=__codelineno-25-26 name=__codelineno-25-26 href=#__codelineno-25-26></a><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=c1>#@ dv.buildRegistry</span>
</span><span id=__span-25-27><a id=__codelineno-25-27 name=__codelineno-25-27 href=#__codelineno-25-27></a><span class=w>    </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=c1>#@ dv.buildRepo</span>
</span><span id=__span-25-28><a id=__codelineno-25-28 name=__codelineno-25-28 href=#__codelineno-25-28></a>
</span><span id=__span-25-29><a id=__codelineno-25-29 name=__codelineno-25-29 href=#__codelineno-25-29></a><span class=nt>appliveview_connector</span><span class=p>:</span>
</span><span id=__span-25-30><a id=__codelineno-25-30 name=__codelineno-25-30 href=#__codelineno-25-30></a><span class=w>  </span><span class=nt>backend</span><span class=p>:</span>
</span><span id=__span-25-31><a id=__codelineno-25-31 name=__codelineno-25-31 href=#__codelineno-25-31></a><span class=w>    </span><span class=nt>sslDeactivated</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-25-32><a id=__codelineno-25-32 name=__codelineno-25-32 href=#__codelineno-25-32></a><span class=w>    </span><span class=nt>ingressEnabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-25-33><a id=__codelineno-25-33 name=__codelineno-25-33 href=#__codelineno-25-33></a><span class=w>    </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=c1>#@ &quot;appliveview.&quot;+dv.domainName</span>
</span><span id=__span-25-34><a id=__codelineno-25-34 name=__codelineno-25-34 href=#__codelineno-25-34></a>
</span><span id=__span-25-35><a id=__codelineno-25-35 name=__codelineno-25-35 href=#__codelineno-25-35></a><span class=nt>appliveview</span><span class=p>:</span>
</span><span id=__span-25-36><a id=__codelineno-25-36 name=__codelineno-25-36 href=#__codelineno-25-36></a><span class=w>  </span><span class=nt>ingressEnabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-25-37><a id=__codelineno-25-37 name=__codelineno-25-37 href=#__codelineno-25-37></a><span class=w>  </span><span class=nt>server</span><span class=p>:</span>
</span><span id=__span-25-38><a id=__codelineno-25-38 name=__codelineno-25-38 href=#__codelineno-25-38></a><span class=w>    </span><span class=nt>tls</span><span class=p>:</span>
</span><span id=__span-25-39><a id=__codelineno-25-39 name=__codelineno-25-39 href=#__codelineno-25-39></a><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-25-40><a id=__codelineno-25-40 name=__codelineno-25-40 href=#__codelineno-25-40></a>
</span><span id=__span-25-41><a id=__codelineno-25-41 name=__codelineno-25-41 href=#__codelineno-25-41></a><span class=nt>tap_gui</span><span class=p>:</span>
</span><span id=__span-25-42><a id=__codelineno-25-42 name=__codelineno-25-42 href=#__codelineno-25-42></a><span class=w>  </span><span class=nt>service_type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
</span><span id=__span-25-43><a id=__codelineno-25-43 name=__codelineno-25-43 href=#__codelineno-25-43></a><span class=w>  </span><span class=nt>app_config</span><span class=p>:</span>
</span><span id=__span-25-44><a id=__codelineno-25-44 name=__codelineno-25-44 href=#__codelineno-25-44></a><span class=w>    </span><span class=nt>auth</span><span class=p>:</span>
</span><span id=__span-25-45><a id=__codelineno-25-45 name=__codelineno-25-45 href=#__codelineno-25-45></a><span class=w>      </span><span class=nt>allowGuestAccess</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-25-46><a id=__codelineno-25-46 name=__codelineno-25-46 href=#__codelineno-25-46></a><span class=w>    </span><span class=nt>customize</span><span class=p>:</span>
</span><span id=__span-25-47><a id=__codelineno-25-47 name=__codelineno-25-47 href=#__codelineno-25-47></a><span class=w>      </span><span class=nt>custom_name</span><span class=p>:</span><span class=w> </span><span class=s>&#39;Portal</span><span class=nv> </span><span class=s>McPortalFace&#39;</span>
</span><span id=__span-25-48><a id=__codelineno-25-48 name=__codelineno-25-48 href=#__codelineno-25-48></a><span class=w>    </span><span class=nt>organization</span><span class=p>:</span>
</span><span id=__span-25-49><a id=__codelineno-25-49 name=__codelineno-25-49 href=#__codelineno-25-49></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&#39;Org</span><span class=nv> </span><span class=s>McOrg</span><span class=nv> </span><span class=s>Face&#39;</span>
</span><span id=__span-25-50><a id=__codelineno-25-50 name=__codelineno-25-50 href=#__codelineno-25-50></a><span class=w>    </span><span class=nt>catalog</span><span class=p>:</span>
</span><span id=__span-25-51><a id=__codelineno-25-51 name=__codelineno-25-51 href=#__codelineno-25-51></a><span class=w>      </span><span class=nt>locations</span><span class=p>:</span>
</span><span id=__span-25-52><a id=__codelineno-25-52 name=__codelineno-25-52 href=#__codelineno-25-52></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">url</span>
</span><span id=__span-25-53><a id=__codelineno-25-53 name=__codelineno-25-53 href=#__codelineno-25-53></a><span class=w>          </span><span class=nt>target</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/joostvdg/tap-catalog/blob/main/catalog-info.yaml</span>
</span><span id=__span-25-54><a id=__codelineno-25-54 name=__codelineno-25-54 href=#__codelineno-25-54></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">url</span>
</span><span id=__span-25-55><a id=__codelineno-25-55 name=__codelineno-25-55 href=#__codelineno-25-55></a><span class=w>          </span><span class=nt>target</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/joostvdg/tap-hello-world/blob/main/catalog/catalog-info.yaml</span>
</span><span id=__span-25-56><a id=__codelineno-25-56 name=__codelineno-25-56 href=#__codelineno-25-56></a>
</span><span id=__span-25-57><a id=__codelineno-25-57 name=__codelineno-25-57 href=#__codelineno-25-57></a><span class=nt>crossplane</span><span class=p>:</span>
</span><span id=__span-25-58><a id=__codelineno-25-58 name=__codelineno-25-58 href=#__codelineno-25-58></a><span class=w>  </span><span class=nt>registryCaBundleConfig</span><span class=p>:</span>
</span><span id=__span-25-59><a id=__codelineno-25-59 name=__codelineno-25-59 href=#__codelineno-25-59></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ca-bundle-config</span>
</span><span id=__span-25-60><a id=__codelineno-25-60 name=__codelineno-25-60 href=#__codelineno-25-60></a><span class=w>    </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ca-bundle</span>
</span><span id=__span-25-61><a id=__codelineno-25-61 name=__codelineno-25-61 href=#__codelineno-25-61></a>
</span><span id=__span-25-62><a id=__codelineno-25-62 name=__codelineno-25-62 href=#__codelineno-25-62></a><span class=c1>#! reduces memory and CPU requirements, not recommended for production</span>
</span><span id=__span-25-63><a id=__codelineno-25-63 name=__codelineno-25-63 href=#__codelineno-25-63></a><span class=c1>#! but our Lab environments have resource restrictions</span>
</span><span id=__span-25-64><a id=__codelineno-25-64 name=__codelineno-25-64 href=#__codelineno-25-64></a><span class=nt>cnrs</span><span class=p>:</span>
</span><span id=__span-25-65><a id=__codelineno-25-65 name=__codelineno-25-65 href=#__codelineno-25-65></a><span class=w>  </span><span class=nt>lite</span><span class=p>:</span>
</span><span id=__span-25-66><a id=__codelineno-25-66 name=__codelineno-25-66 href=#__codelineno-25-66></a><span class=w>    </span><span class=nt>enable</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w> </span>
</span><span id=__span-25-67><a id=__codelineno-25-67 name=__codelineno-25-67 href=#__codelineno-25-67></a>
</span><span id=__span-25-68><a id=__codelineno-25-68 name=__codelineno-25-68 href=#__codelineno-25-68></a><span class=nt>contour</span><span class=p>:</span>
</span><span id=__span-25-69><a id=__codelineno-25-69 name=__codelineno-25-69 href=#__codelineno-25-69></a><span class=w>  </span><span class=nt>envoy</span><span class=p>:</span>
</span><span id=__span-25-70><a id=__codelineno-25-70 name=__codelineno-25-70 href=#__codelineno-25-70></a><span class=w>    </span><span class=nt>service</span><span class=p>:</span>
</span><span id=__span-25-71><a id=__codelineno-25-71 name=__codelineno-25-71 href=#__codelineno-25-71></a><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LoadBalancer</span>
</span><span id=__span-25-72><a id=__codelineno-25-72 name=__codelineno-25-72 href=#__codelineno-25-72></a>
</span><span id=__span-25-73><a id=__codelineno-25-73 name=__codelineno-25-73 href=#__codelineno-25-73></a><span class=nt>ceip_policy_disclosed</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-25-74><a id=__codelineno-25-74 name=__codelineno-25-74 href=#__codelineno-25-74></a><span class=nt>excluded_packages</span><span class=p>:</span>
</span><span id=__span-25-75><a id=__codelineno-25-75 name=__codelineno-25-75 href=#__codelineno-25-75></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">scanning.apps.tanzu.vmware.com</span><span class=w> </span><span class=c1>#! disabled for now, enabled when we upgrade OOTB Basic to Test &amp; Scanning</span>
</span><span id=__span-25-76><a id=__codelineno-25-76 name=__codelineno-25-76 href=#__codelineno-25-76></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">grype.scanning.apps.tanzu.vmware.com</span><span class=w> </span><span class=c1>#! disabled for now, enabled when we upgrade OOTB Basic to Test &amp; Scanning</span>
</span><span id=__span-25-77><a id=__codelineno-25-77 name=__codelineno-25-77 href=#__codelineno-25-77></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">policy.apps.tanzu.vmware.com</span><span class=w> </span><span class=c1>#! disabled for now, enabled when we upgrade OOTB Basic to Test &amp; Scanning</span>
</span><span id=__span-25-78><a id=__codelineno-25-78 name=__codelineno-25-78 href=#__codelineno-25-78></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eventing.tanzu.vmware.com</span><span class=w> </span><span class=c1>#! not used, so removing to reduce memory/cpu footprint</span>
</span><span id=__span-25-79><a id=__codelineno-25-79 name=__codelineno-25-79 href=#__codelineno-25-79></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-telemetry.tanzu.vmware.com.0.5.0-build</span><span class=w> </span><span class=c1>#! not used, so removing to reduce memory/cpu footprint</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Template Explained</p> <p><code>shared</code>: values that are to be shared across any package that has the same configuration option. It is here we configure Install Registry credentials and custom CA.</p> <p><code>buildservice</code>: if your environment has no or restricted access to the internet, you need to manage the depencies yourself. It can re-use the repository from the shared configuration. Here we do that, and tell it to exclude the depencies as we install them ourselves.</p> <p><code>supply_chain</code>: TAP can install one Cartographer Supply Chain fully*. You specify the Supply Chain by name, and then configure the Supply Chain by its own name**, in our case <code>basic</code> and <code>ootb_supply_chain_basic</code>. Where we override the default Registry and Repository; this is where our built images are pushed.</p> <p><code>appliveview</code>: the App Live View component let's use view registered application's resources existing across TAP cluster in the TAP GUI. Note, this is a TAP GUI component and that is where you will find it.</p> <p><code>tap_gui</code>: the TAP GUI is the way to discover APIs, applications, accelerators and the like. It is Backstage with a few VMware Tanzu plugins included. It has a lot of configuration options, most of which can be ignored for an initial installation. To use TAP GUI, you have to specify an authorization provider. In the event you do not have one (ready), you set <strong>app_config.auth.allowGuestAccess</strong> to true.</p> <p><code>crossplane</code>: Crossplane is a new package for TAP 1.5, and unfortunately does not (yet) pick up the Shared CA configuration. So we have to configure this ourselves. TAP provides external services for use with the Service Binding Specification. By default it includes Crossplane packages for several Bitnami Helm Charts (packed as Bitnami Services).</p> <p><code>ceip_policy_disclosed</code>: if you accept the policy or not. If you set this to false, you cannot install TAP</p> <p><code>excluded_packages</code>: the packages we exclude are from the Test &amp; Scanning Supply Chain. They require some configuration, especially if you are in a restricted internet access environment. Because we are using the Basic Supply Chain, these packages are not required and we can exclude them.</p> <ul> <li>= the Test and Test &amp; Scanning Supply Chains do miss a Tekton task, but are complete beyond that</li> </ul> <p>** = each Supply Chain is its own Carvel Package part of the TAP Packages Repository</p> </div> <h3 id=tanzu-build-service>Tanzu Build Service<a class=headerlink href=#tanzu-build-service title="Permanent link">&para;</a></h3> <p>TAP includes a version of Tanzu Build Service (TBS). One of the things TBS needs, is a bunch of container images for the various Build Packs and the various versions of tech stacks they support.</p> <p>A full set of depencies is ~12 GB, and TBS starts synchronizing these to the nodes once it is up and running. There are two complications with this, one, thats a lot of data to synchronize from the outside, and two, you might not be able to reach the outside.</p> <p>So what we do instad, is to <a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/install.html#optional-additional-build-service-configurations-4>relocate the TBS depencies</a><sup id=fnref:8><a class=footnote-ref href=#fn:8>8</a></sup>, in the same way as we do with the TAP packages.</p> <p>We configured this in the TAP Profile already, by specifying the following:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=nt>buildservice</span><span class=p>:</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=w>  </span><span class=nt>exclude_dependencies</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div> <p>We cannot install the TAP TBS Dependencies (a TAP specific bundle of TBS) until we install TAP. The TAP TBS Dependencies package depends on CRDs that are installed by TAP. So we will continue this later.</p> <h2 id=install-tap-profile>Install TAP Profile<a class=headerlink href=#install-tap-profile title="Permanent link">&para;</a></h2> <p>At this point, we have the following:</p> <ul> <li>TAP Packages available in a local Image Registry</li> <li>TAP TBS Dependencies available in a local Image Registry</li> <li>A Namespace to install TAP into (the concention is <code>tap-install</code>)</li> <li>Read access secret to the local Image Registry to retrieve the TAP packages</li> <li>Write access secret to the local Image Registry to write application build images to</li> <li>Profile Template for our Profile of choice (<code>Full</code>)</li> </ul> <p>We now take the following steps:</p> <ol> <li>Generate a Profile config file from the YTT Template</li> <li>Install the TAP package</li> <li>Install the TBS Dependencies Package Repository</li> <li>Install the TBS Dependencies Package</li> </ol> <h3 id=generate-profile-config-file>Generate Profile Config FIle<a class=headerlink href=#generate-profile-config-file title="Permanent link">&para;</a></h3> <p>First, we set the required variables:</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>You should have received the address of the Build Registry and the Domain specific to your cluster!</p> </div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_BUILD_REGISTRY_SECRET</span><span class=o>=</span>registry-credentials
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=nb>export</span><span class=w> </span><span class=nv>BUILD_REGISTRY_REPO</span><span class=o>=</span>tap-apps
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=nb>export</span><span class=w> </span><span class=nv>TBS_REPO</span><span class=o>=</span>buildservice/tbs-full-deps
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=nb>export</span><span class=w> </span><span class=nv>CA_CERT</span><span class=o>=</span><span class=k>$(</span>cat<span class=w> </span>ca.crt<span class=k>)</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=nb>export</span><span class=w> </span><span class=nv>BUILD_REGISTRY</span><span class=o>=</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=nb>export</span><span class=w> </span><span class=nv>DOMAIN_NAME</span><span class=o>=</span>
</span></code></pre></div> <p>And then we run YTT to generate our Profile configuration file.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>ytt<span class=w> </span>-f<span class=w> </span>full-profile.ytt.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=w>  </span>-v<span class=w> </span><span class=nv>buildRegistry</span><span class=o>=</span><span class=s2>&quot;</span><span class=nv>$BUILD_REGISTRY</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>  </span>-v<span class=w> </span><span class=nv>buildRegistrySecret</span><span class=o>=</span><span class=s2>&quot;</span><span class=nv>$BUILD_REGISTRY_SECRET</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>  </span>-v<span class=w> </span><span class=nv>buildRepo</span><span class=o>=</span><span class=s2>&quot;</span><span class=nv>$BUILD_REGISTRY_REPO</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>  </span>-v<span class=w> </span><span class=nv>tbsRepo</span><span class=o>=</span><span class=s2>&quot;</span><span class=nv>$TBS_REPO</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>  </span>-v<span class=w> </span><span class=nv>domainName</span><span class=o>=</span><span class=s2>&quot;</span><span class=nv>$DOMAIN_NAME</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=w>  </span>-v<span class=w> </span><span class=nv>caCert</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>CA_CERT</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=w>  </span>&gt;<span class=w> </span><span class=s2>&quot;tap-values-full.yml&quot;</span>
</span></code></pre></div> <p>We recommend you inspect the generated file:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>cat<span class=w> </span>tap-values-full.yml
</span></code></pre></div> <h3 id=install-tap-package>Install TAP Package<a class=headerlink href=#install-tap-package title="Permanent link">&para;</a></h3> <p>We are now ready to install TAP.</p> <p>In case you don't remember or your environment variables are no longer set, set them to the appropriate values:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=o>=</span>tap-install
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_VERSION</span><span class=o>=</span><span class=m>1</span>.5.0
</span></code></pre></div> <p>We can then <a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/install.html#install-your-tanzu-application-platform-package-5>install TAP</a><sup id=fnref:9><a class=footnote-ref href=#fn:9>9</a></sup> via the Tanzu CLI.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a>tanzu<span class=w> </span>package<span class=w> </span>install<span class=w> </span>tap<span class=w> </span><span class=se>\</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=w>  </span>-p<span class=w> </span>tap.tanzu.vmware.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>  </span>-v<span class=w> </span><span class=nv>$TAP_VERSION</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>  </span>--values-file<span class=w> </span>tap-values-full.yml<span class=w> </span><span class=se>\</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>  </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>You can get an overview of the Packages that are installed via the Tanzu CLI:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>tanzu<span class=w> </span>package<span class=w> </span>installed<span class=w> </span>list<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>Or via <code>kubectl</code>:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a>kubectl<span class=w> </span>get<span class=w> </span>app<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>If there is an issue, you can debug the package installs via <code>kubectl</code> commands:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a>kubectl<span class=w> </span>describe<span class=w> </span>app<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span><span class=w> </span><span class=si>${</span><span class=nv>APP</span><span class=si>}</span>
</span></code></pre></div> <div class="admonition hint"> <p class=admonition-title>Carvel Tips</p> <p>Some Carvel tips worth mentioning:</p> <ol> <li>If you need to update an installation, you can run <code>tap package install</code> again. The Tanzu CLI handles the difference between Install and Update for you.</li> <li>KAPP works with asynchronous loops. This can cause the Client (Tanzu CLI) to break out of the watch loop when it detects the faillure of the <strong>previous</strong> reconcilliation. Don't be alarmed, and check with <code>kubectl get app</code> or Tanzu CLI (below) to verify if the update succeeded. <div class="language-sh highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a>tanzu<span class=w> </span>package<span class=w> </span>installed<span class=w> </span>list
</span></code></pre></div></li> <li>If you are sure there's nothing holding back a successful reconciliation, but it isn't updating (yet), you can force a reconcilliation with <code>kick</code>: <div class="language-sh highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a>tanzu<span class=w> </span>package<span class=w> </span>installed<span class=w> </span>kick<span class=w> </span><span class=si>${</span><span class=nv>APP</span><span class=si>}</span><span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div></li> <li>If you delete the TAP install, and then re-install it, remember that an uninstall removes all associated Namespaces as well. So you will have to do the <a href=/tap-workshops/install/basic/#configure-certificate-authority-bundle-for-crossplane>Crossplane prep</a> again.</li> </ol> </div> <p>If everything is still reconciling and you want to wait on the TAP app to succeed:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>ReconcileSucceeded<span class=w> </span>app<span class=w> </span><span class=se>\</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=w>  </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span><span class=w> </span>tap<span class=w> </span><span class=se>\</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=w>  </span>--timeout<span class=o>=</span>10m
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>Takes about 7-8 minutes</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>NAME<span class=w>  </span>DESCRIPTION<span class=w>           </span>SINCE-DEPLOY<span class=w>   </span>AGE
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>tap<span class=w>   </span>Reconcile<span class=w> </span>succeeded<span class=w>   </span>4m10s<span class=w>          </span>7m6s
</span></code></pre></div> </div> <h3 id=determine-tbs-version>Determine TBS Version<a class=headerlink href=#determine-tbs-version title="Permanent link">&para;</a></h3> <p>Now that we have the TAP package installed, we can install the TBS dependencies.</p> <p>First, we need to verify which version of TBS TAP shipped<sup id=fnref2:8><a class=footnote-ref href=#fn:8>8</a></sup>.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a>tanzu<span class=w> </span>package<span class=w> </span>available<span class=w> </span>list<span class=w> </span>buildservice.tanzu.vmware.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>   </span>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>Which for TAP <code>1.5.0</code> gives the following result:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=w>  </span>NAME<span class=w>                           </span>VERSION<span class=w>  </span>RELEASED-AT
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=w>  </span>buildservice.tanzu.vmware.com<span class=w>  </span><span class=m>1</span>.10.8<span class=w>   </span>-
</span></code></pre></div> <p>We then set the environment variable, so we can re-use it:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TBS_VERSION</span><span class=o>=</span><span class=m>1</span>.10.8
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Your environment should already have the TBS Dependencies relocated for you.</p> <p>If you want to know how to do so, you can find it documented <a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/install.html#optional-additional-build-service-configurations-4>here</a><sup id=fnref4:8><a class=footnote-ref href=#fn:8>8</a></sup></p> </div> <h3 id=install-tbs-depencies-package-repository>Install TBS Depencies Package Repository<a class=headerlink href=#install-tbs-depencies-package-repository title="Permanent link">&para;</a></h3> <p>In case you have not yet, set the environment variables.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TBS_REPO</span><span class=o>=</span>buildservice/tbs-full-deps
</span></code></pre></div> <p>And we then we can install the TBS Dependencies Package Repository:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>add<span class=w> </span>tbs-full-deps-repository<span class=w> </span><span class=se>\</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=w>  </span>--url<span class=w> </span><span class=si>${</span><span class=nv>INSTALL_REGISTRY_HOSTNAME</span><span class=si>}</span>/<span class=si>${</span><span class=nv>TBS_REPO</span><span class=si>}</span>:<span class=si>${</span><span class=nv>TBS_VERSION</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=w>  </span>--namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>We can verify the status via the Tanzu CLI:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>list<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>Which should now yield this:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=w>  </span>NAME<span class=w>                      </span>SOURCE<span class=w>                                                                            </span>STATUS
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=w>  </span>tanzu-tap-repository<span class=w>      </span><span class=o>(</span>imgpkg<span class=o>)</span><span class=w> </span>harbor.services.h2o-2-9349.h2o.vmware.com/tap/tap-packages:1.5.0<span class=w>         </span>Reconcile<span class=w> </span>succeeded
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=w>  </span>tbs-full-deps-repository<span class=w>  </span><span class=o>(</span>imgpkg<span class=o>)</span><span class=w>                                                                          </span>Reconcile<span class=w> </span>succeeded
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=w>                            </span>harbor.services.h2o-2-9349.h2o.vmware.com/buildservice/tbs-full-deps:1.10.8
</span></code></pre></div> <h3 id=install-tbs-full-dependencies-package>Install TBS Full Dependencies Package<a class=headerlink href=#install-tbs-full-dependencies-package title="Permanent link">&para;</a></h3> <p>We can now install the TBS Full Dependencies package<sup id=fnref3:8><a class=footnote-ref href=#fn:8>8</a></sup>:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a>tanzu<span class=w> </span>package<span class=w> </span>install<span class=w> </span>full-tbs-deps<span class=w> </span><span class=se>\</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=w>  </span>-p<span class=w> </span>full-tbs-deps.tanzu.vmware.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=w>  </span>-v<span class=w> </span><span class=si>${</span><span class=nv>TBS_VERSION</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=w>  </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_INSTALL_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>And then verify the package is installed and reconciled correctly:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a>tanzu<span class=w> </span>package<span class=w> </span>installed<span class=w> </span>get<span class=w> </span>full-tbs-deps<span class=w> </span>-n<span class=w> </span><span class=nv>$TAP_INSTALL_NAMESPACE</span>
</span></code></pre></div> <p>Which should return something like this:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a>NAMESPACE:<span class=w>          </span>tap-install
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>NAME:<span class=w>               </span>full-tbs-deps
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>PACKAGE-NAME:<span class=w>       </span>full-tbs-deps.tanzu.vmware.com
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a>PACKAGE-VERSION:<span class=w>    </span><span class=m>1</span>.10.8
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>STATUS:<span class=w>             </span>Reconcile<span class=w> </span>succeeded
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>CONDITIONS:<span class=w>         </span>-<span class=w> </span>type:<span class=w> </span>ReconcileSucceeded
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a><span class=w>  </span>status:<span class=w> </span><span class=s2>&quot;True&quot;</span>
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a><span class=w>  </span>reason:<span class=w> </span><span class=s2>&quot;&quot;</span>
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a><span class=w>  </span>message:<span class=w> </span><span class=s2>&quot;&quot;</span>
</span></code></pre></div> <h2 id=install-test-application>Install Test Application<a class=headerlink href=#install-test-application title="Permanent link">&para;</a></h2> <ul> <li>explain workloads</li> <li>CLI</li> <li>namespace &amp; namespace provisioner</li> <li>?</li> </ul> <p>One of the goals of TAP is to be flexible, to support the various ways people build and run applications.</p> <p>Cartographer's Supply Chains let you define any workflow you want for any kind of resource you can express in Kubernetes.</p> <p>While that is interesting, starting with the basics, we focus on the <code>batteries included</code> part. Which gives you three main workflows:</p> <ul> <li>build an application</li> <li>run an application</li> <li>both build &amp; run an application</li> </ul> <p>Each of the three Out-Of-The-Box (OOTB) Supply Chains comes with two <code>ClusterSupplyChain</code> CRs.</p> <ul> <li><code>x-image-to-url</code></li> <li><code>source-x-to-url</code></li> </ul> <p>The Source to Image journey is defined by the <code>Workload</code> CR. The Image to URL journey is defined by the <code>Deliverable</code> CR.</p> <p>When you start at the Source, the OOTB Supply Chains generate the <code>Deliverable</code> CR for you.</p> <p>To test if our TAP machinery works as intended, we'll stick to creating a <code>Workload</code> that uses the <code>source-to-url</code> Supply Chain.</p> <p>In order to the tools used by the Supply Chain to do their work, they need the appropriate Secrets and RBAC permissions. So we start with setting up a Developer Namespace.</p> <h3 id=set-up-developer-namespace>Set Up Developer Namespace<a class=headerlink href=#set-up-developer-namespace title="Permanent link">&para;</a></h3> <p>Starting with TAP 1.5, it includes a package called the <a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/namespace-provisioner-about.html>Namespace Provisioner</a><sup id=fnref:10><a class=footnote-ref href=#fn:10>10</a></sup>.</p> <p>This let's us configure Developer Namespaces by adding Label.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=o>=</span>dev
</span></code></pre></div> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Via kubectl</label><label for=__tabbed_1_2>Via Manifest</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a>kubectl<span class=w> </span>create<span class=w> </span>namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a>
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>kubectl<span class=w> </span>label<span class=w> </span>namespace<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a><span class=w>  </span>apps.tanzu.vmware.com/tap-ns<span class=o>=</span><span class=s2>&quot;&quot;</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a>cat<span class=w> </span><span class=s>&lt;&lt;EOF &gt; tap-dev-namespace.yaml</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a><span class=s>apiVersion: v1</span>
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a><span class=s>kind: Namespace</span>
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=s>metadata:</span>
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a><span class=s>  labels:</span>
</span><span id=__span-51-6><a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a><span class=s>    apps.tanzu.vmware.com/tap-ns: &quot;&quot;</span>
</span><span id=__span-51-7><a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a><span class=s>    kubernetes.io/metadata.name: ${TAP_DEVELOPER_NAMESPACE}</span>
</span><span id=__span-51-8><a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a><span class=s>  name: ${TAP_DEVELOPER_NAMESPACE}</span>
</span><span id=__span-51-9><a id=__codelineno-51-9 name=__codelineno-51-9 href=#__codelineno-51-9></a><span class=s>EOF</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>tap-dev-namespace.yaml
</span></code></pre></div> </div> </div> </div> <p>If we wait a few moments, we can then see the Namespace contains Secrets and RoleBindings:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a>kubectl<span class=w> </span>get<span class=w> </span>secret,rolebinding<span class=w> </span>-n<span class=w> </span><span class=nv>$TAP_DEVELOPER_NAMESPACE</span>
</span></code></pre></div> <p>Which shows something like this:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a>NAME<span class=w>                            </span>TYPE<span class=w>                             </span>DATA<span class=w>   </span>AGE
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>secret/registries-credentials<span class=w>   </span>kubernetes.io/dockerconfigjson<span class=w>   </span><span class=m>1</span><span class=w>      </span>25d
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>NAME<span class=w>                                                            </span>ROLE<span class=w>                   </span>AGE
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>rolebinding.rbac.authorization.k8s.io/default-permit-workload<span class=w>   </span>ClusterRole/workload<span class=w>   </span>25d
</span></code></pre></div> <h3 id=create-workload>Create Workload<a class=headerlink href=#create-workload title="Permanent link">&para;</a></h3> <p>Now that we have a Namespace to work in, we can define a Workload.</p> <p>We can then either use the CLI or the <code>Workload</code> CR to create our test workload.</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>Tanzu CLI</label><label for=__tabbed_2_2>Kubernetes Manifest</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a>tanzu<span class=w> </span>apps<span class=w> </span>workload<span class=w> </span>create<span class=w> </span>smoke-app<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=w>  </span>--git-repo<span class=w> </span>https://github.com/sample-accelerators/tanzu-java-web-app.git<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class=w>  </span>--git-branch<span class=w> </span>main<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=w>  </span>--type<span class=w> </span>web<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a><span class=w>  </span>--label<span class=w> </span>app.kubernetes.io/part-of<span class=o>=</span>smoke-app<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a><span class=w>  </span>--annotation<span class=w> </span>autoscaling.knative.dev/minScale<span class=o>=</span><span class=m>1</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-55-7><a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a><span class=w>  </span>--yes<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-8><a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a><span class=w>  </span>-n<span class=w> </span><span class=s2>&quot;</span><span class=nv>$TAP_DEVELOPER_NAMESPACE</span><span class=s2>&quot;</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;apiVersion: carto.run/v1alpha1</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a><span class=s2>kind: Workload</span>
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=s2>metadata:</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a><span class=s2>  labels:</span>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a><span class=s2>    app.kubernetes.io/part-of: smoke-app</span>
</span><span id=__span-56-6><a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a><span class=s2>    apps.tanzu.vmware.com/workload-type: web</span>
</span><span id=__span-56-7><a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a><span class=s2>  name: smoke-app</span>
</span><span id=__span-56-8><a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a><span class=s2>  namespace: </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span><span id=__span-56-9><a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a><span class=s2>spec:</span>
</span><span id=__span-56-10><a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a><span class=s2>  params:</span>
</span><span id=__span-56-11><a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a><span class=s2>  - name: annotations</span>
</span><span id=__span-56-12><a id=__codelineno-56-12 name=__codelineno-56-12 href=#__codelineno-56-12></a><span class=s2>    value:</span>
</span><span id=__span-56-13><a id=__codelineno-56-13 name=__codelineno-56-13 href=#__codelineno-56-13></a><span class=s2>      autoscaling.knative.dev/minScale: \&quot;1\&quot;</span>
</span><span id=__span-56-14><a id=__codelineno-56-14 name=__codelineno-56-14 href=#__codelineno-56-14></a><span class=s2>  source:</span>
</span><span id=__span-56-15><a id=__codelineno-56-15 name=__codelineno-56-15 href=#__codelineno-56-15></a><span class=s2>    git:</span>
</span><span id=__span-56-16><a id=__codelineno-56-16 name=__codelineno-56-16 href=#__codelineno-56-16></a><span class=s2>      ref:</span>
</span><span id=__span-56-17><a id=__codelineno-56-17 name=__codelineno-56-17 href=#__codelineno-56-17></a><span class=s2>        branch: main</span>
</span><span id=__span-56-18><a id=__codelineno-56-18 name=__codelineno-56-18 href=#__codelineno-56-18></a><span class=s2>      url: https://github.com/sample-accelerators/tanzu-java-web-app.git</span>
</span><span id=__span-56-19><a id=__codelineno-56-19 name=__codelineno-56-19 href=#__codelineno-56-19></a><span class=s2>&quot;</span><span class=w> </span>&gt;<span class=w> </span>workload.yml
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>workload.yml
</span></code></pre></div> </div> </div> </div> <p>Use <code>kubectl wait</code> to wait for the app to be ready.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>Ready<span class=w> </span>Workload<span class=w> </span>smoke-app<span class=w> </span>--timeout<span class=o>=</span>10m<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>$TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <h3 id=verify-workload>Verify Workload<a class=headerlink href=#verify-workload title="Permanent link">&para;</a></h3> <p>To see the logs:</p> <div class="tabbed-set tabbed-alternate" data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>Tanzu CLI</label><label for=__tabbed_3_2>Stern</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a>tanzu<span class=w> </span>apps<span class=w> </span>workload<span class=w> </span>tail<span class=w> </span>smoke-app<span class=w> </span>--timestamp<span class=w> </span>--since<span class=w> </span>1h<span class=w> </span><span class=se>\</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=w>  </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a>stern<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span><span class=w> </span>-l<span class=w> </span>app.kubernetes.io/part-of<span class=o>=</span>smoke-app
</span></code></pre></div> </div> </div> </div> <p>To get the status:</p> <div class="tabbed-set tabbed-alternate" data-tabs=4:2><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>Tanzu CLI</label><label for=__tabbed_4_2>Kubectl</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a>tanzu<span class=w> </span>apps<span class=w> </span>workload<span class=w> </span>get<span class=w> </span>smoke-app<span class=w> </span><span class=se>\</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a><span class=w>    </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a>kubectl<span class=w> </span>get<span class=w> </span>workload<span class=w> </span>smoke-app<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a><span class=w>  </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> </div> </div> </div> <p>And to verify the Image build (kpack):</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a>kubectl<span class=w> </span>describe<span class=w> </span>images.kpack.io<span class=w> </span>smoke-app<span class=se>\</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a><span class=w>   </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <h3 id=call-app-endpoint>Call App Endpoint<a class=headerlink href=#call-app-endpoint title="Permanent link">&para;</a></h3> <p>Collect the endpoint:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a>kubectl<span class=w> </span>get<span class=w> </span>httpproxy<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <p>Which should return something like this:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a>NAME<span class=w>                                                              </span>FQDN<span class=w>                                            </span>TLS<span class=w> </span>SECRET<span class=w>                                       </span>STATUS<span class=w>   </span>STATUS<span class=w> </span>DESCRIPTION
</span><span id=__span-65-2><a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a>smoke-app-contour-smoke-app.dev<span class=w>                                   </span>smoke-app.dev<span class=w>                                                                                    </span>valid<span class=w>    </span>Valid<span class=w> </span>HTTPProxy
</span><span id=__span-65-3><a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a>smoke-app-contour-smoke-app.dev.lab02.h2o-2-9349.h2o.vmware.com<span class=w>   </span>smoke-app.dev.lab02.h2o-2-9349.h2o.vmware.com<span class=w>   </span>dev/route-337ba674-14e1-470c-9733-0b1bab8922b4<span class=w>   </span>valid<span class=w>    </span>Valid<span class=w> </span>HTTPProxy
</span><span id=__span-65-4><a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a>smoke-app-contour-smoke-app.dev.svc<span class=w>                               </span>smoke-app.dev.svc<span class=w>                                                                                </span>valid<span class=w>    </span>Valid<span class=w> </span>HTTPProxy
</span><span id=__span-65-5><a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a>smoke-app-contour-smoke-app.dev.svc.cluster.local<span class=w>                 </span>smoke-app.dev.svc.cluster.local<span class=w>                                                                  </span>valid<span class=w>    </span>Valid<span class=w> </span>HTTPProxy
</span></code></pre></div> <p>Copy the URL that has an FQDN with this structure: <code>&lt;app&gt;.&lt;namespace&gt;.&lt;labName&gt;.h2o-2-9349.h2o.vmware.com</code>:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=nb>export</span><span class=w> </span><span class=nv>URL</span><span class=o>=</span>
</span></code></pre></div> <p>And then you can curl:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a>curl<span class=w> </span>-lk<span class=w> </span><span class=s2>&quot;http://</span><span class=si>${</span><span class=nv>URL</span><span class=si>}</span><span class=s2>&quot;</span>
</span></code></pre></div> <h2 id=register-and-view-app-in-tap-gui>Register and View App in TAP GUI<a class=headerlink href=#register-and-view-app-in-tap-gui title="Permanent link">&para;</a></h2> <ul> <li>Open TAP GUI</li> <li>View Workload's Supply Chain</li> <li>Update TAP GUI Config / TAP install</li> <li>Register Application</li> <li>View Workload in App Live View</li> <li>Point to Hello Workload for managing an App with updates to source code (via Gitea)</li> </ul> <h2 id=cleanup>Cleanup<a class=headerlink href=#cleanup title="Permanent link">&para;</a></h2> <h3 id=delete-workload>Delete Workload<a class=headerlink href=#delete-workload title="Permanent link">&para;</a></h3> <p>And then we can delete our test workload if want to.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a>tanzu<span class=w> </span>apps<span class=w> </span>workload<span class=w> </span>delete<span class=w> </span>smoke-app<span class=w> </span>-y<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>TAP_DEVELOPER_NAMESPACE</span><span class=si>}</span>
</span></code></pre></div> <h2 id=links>Links<a class=headerlink href=#links title="Permanent link">&para;</a></h2> <div class=footnote> <hr> <ol> <li id=fn:1> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/prerequisites.html>TAP 1.5 - Prerequisites</a>&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/prerequisites.html#kubernetes-cluster-requirements-3>TAP 1.5 - Supported Kubernetes versions</a>&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> <li id=fn:3> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/install.html#relocate-images-to-a-registry-0>TAP 1.5 - Relocate images to a registry</a>&#160;<a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">&#8617;</a></p> </li> <li id=fn:4> <p><a href=https://docs.vmware.com/en/Cluster-Essentials-for-VMware-Tanzu/1.5/cluster-essentials/deploy.html>TAP 1.5 - Cluster Essentials</a>&#160;<a class=footnote-backref href=#fnref:4 title="Jump back to footnote 4 in the text">&#8617;</a><a class=footnote-backref href=#fnref2:4 title="Jump back to footnote 4 in the text">&#8617;</a><a class=footnote-backref href=#fnref3:4 title="Jump back to footnote 4 in the text">&#8617;</a></p> </li> <li id=fn:5> <p><a href=https://carvel.dev/kapp-controller/ >KAPP Controller - Overview</a>&#160;<a class=footnote-backref href=#fnref:5 title="Jump back to footnote 5 in the text">&#8617;</a></p> </li> <li id=fn:6> <p><a href=https://github.com/carvel-dev/secretgen-controller>SecretGen Controller - GitHub page</a>&#160;<a class=footnote-backref href=#fnref:6 title="Jump back to footnote 6 in the text">&#8617;</a></p> </li> <li id=fn:7> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/install.html#full-profile-3>TAP 1.5 - Full profile example</a>&#160;<a class=footnote-backref href=#fnref:7 title="Jump back to footnote 7 in the text">&#8617;</a></p> </li> <li id=fn:8> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/install.html#optional-additional-build-service-configurations-4>TAP 1.5 - Handle TBS Depencies</a>&#160;<a class=footnote-backref href=#fnref:8 title="Jump back to footnote 8 in the text">&#8617;</a><a class=footnote-backref href=#fnref2:8 title="Jump back to footnote 8 in the text">&#8617;</a><a class=footnote-backref href=#fnref3:8 title="Jump back to footnote 8 in the text">&#8617;</a><a class=footnote-backref href=#fnref4:8 title="Jump back to footnote 8 in the text">&#8617;</a></p> </li> <li id=fn:9> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/install.html#install-your-tanzu-application-platform-package-5>TAP 1.5 - Install TAP Package</a>&#160;<a class=footnote-backref href=#fnref:9 title="Jump back to footnote 9 in the text">&#8617;</a></p> </li> <li id=fn:10> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/namespace-provisioner-about.html>TAP 1.5 - Namespace Provisioner</a>&#160;<a class=footnote-backref href=#fnref:10 title="Jump back to footnote 10 in the text">&#8617;</a></p> </li> <li id=fn:11> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/app-sso-service-operators-workload-trust-custom-ca.html>TAP 1.5 - Trust CA for Workload specifically</a>&#160;<a class=footnote-backref href=#fnref:11 title="Jump back to footnote 11 in the text">&#8617;</a></p> </li> <li id=fn:12> <p><a href=https://carvel.dev/kapp-controller/docs/v0.43.2/controller-config/#controller-configuration-spec>KAPP Controller - Configure Controller to Trust custom CA</a>&#160;<a class=footnote-backref href=#fnref:12 title="Jump back to footnote 12 in the text">&#8617;</a></p> </li> <li id=fn:13> <p><a href=https://docs.crossplane.io/knowledge-base/guides/self-signed-ca-certs/ >Crossplane - Configure Self-signed CA Certs support</a>&#160;<a class=footnote-backref href=#fnref:13 title="Jump back to footnote 13 in the text">&#8617;</a></p> </li> <li id=fn:14> <p><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.5/tap/bitnami-services-tutorials-working-with-bitnami-services.html>TAP 1.5 - Bitnami Services</a>&#160;<a class=footnote-backref href=#fnref:14 title="Jump back to footnote 14 in the text">&#8617;</a></p> </li> <li id=fn:15> <p><a href=https://www.crossplane.io/ >Crossplane - The Cloud Native Control Plane Framework</a>&#160;<a class=footnote-backref href=#fnref:15 title="Jump back to footnote 15 in the text">&#8617;</a></p> </li> </ol> </div> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2023-05-15 07:44:41</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023 Joost van der Griendt </div> </div> <div class=md-social> <a href=https://github.com/joostvdg target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://twitter.com/joost_vdg target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://linkedin.com/in/joostvdg target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"method": "mike", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.2a6f1dda.min.js></script> </body> </html>